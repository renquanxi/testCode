(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-028eadbc"],{1148:function(e,t,n){"use strict";var o=n("5926"),i=n("577e"),r=n("1d80");e.exports=function(e){var t=i(r(this)),n="",a=o(e);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},3766:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("audio",{attrs:{id:"audio"}}),n("div",{staticClass:"iconfont icon-sound"}),n("el-progress",{attrs:{"show-text":!1,"stroke-width":5,percentage:e.Recordingtage,color:"#2E70ED"}}),n("div",{staticClass:"time-text"},[e._v(e._s(e.Recordingtime))]),n("el-button",{staticClass:"record-btn",on:{click:e.startRecording}},[e._v(e._s(e.Recordingbtn))])],1)},i=[],r=(n("b680"),n("c782")),a=n.n(r),c=new(window.AudioContext||window.webkitAudioContext),s=new a.a(c,{onAnalysed:function(e){console.log("recorder data",e,321)}}),u={name:"recorderDemo",data:function(){return{Recordingbtn:"开始录音",Recordingtime:"00",Recordingtage:"30",Recordingnum:""}},created:function(){},methods:{startRecording:function(){var e=this;s.start().then((function(){console.log(1111),e.Recordingbtn="保存录音",e.Recordingnum=0,e.Recordingtime="0:00",e.Recordingtage=0,e.Recordingint=window.setInterval((function(){this.Recordingnum++,this.Recordingtime=parseInt(this.Recordingnum/60)+":"+(this.Recordingnum%60<10?"0"+this.Recordingnum%60:this.Recordingnum%60),this.Recordingtage=parseFloat((self.Recordingnum/18).toFixed(2))}),1e3)})).catch((function(e){console.log(e)}))}}},l=u,d=n("2877"),f=Object(d["a"])(l,o,i,!1,null,"bdb1c8fe",null);t["default"]=f.exports},"408a":function(e,t){var n=1..valueOf;e.exports=function(e){return n.call(e)}},"5c3d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n("9dd0"),r=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s={nFrequencyBars:255,onAnalysed:null},u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,e),this.config=Object.assign({},s,n),this.audioContext=t,this.audioInput=null,this.realAudioInput=null,this.inputPoint=null,this.audioRecorder=null,this.rafID=null,this.analyserContext=null,this.recIndex=0,this.stream=null,this.updateAnalysers=this.updateAnalysers.bind(this)}return o(e,[{key:"init",value:function(e){var t=this;return new Promise((function(n){t.inputPoint=t.audioContext.createGain(),t.stream=e,t.realAudioInput=t.audioContext.createMediaStreamSource(e),t.audioInput=t.realAudioInput,t.audioInput.connect(t.inputPoint),t.analyserNode=t.audioContext.createAnalyser(),t.analyserNode.fftSize=2048,t.inputPoint.connect(t.analyserNode),t.audioRecorder=new r.default(t.inputPoint);var o=t.audioContext.createGain();o.gain.value=0,t.inputPoint.connect(o),o.connect(t.audioContext.destination),t.updateAnalysers(),n()}))}},{key:"start",value:function(){var e=this;return new Promise((function(t,n){e.audioRecorder?(e.audioRecorder.clear(),e.audioRecorder.record(),t(e.stream)):n("Not currently recording")}))}},{key:"stop",value:function(){var e=this;return new Promise((function(t){e.audioRecorder.stop(),e.audioRecorder.getBuffer((function(n){e.audioRecorder.exportWAV((function(e){return t({buffer:n,blob:e})}))}))}))}},{key:"updateAnalysers",value:function(){if(this.config.onAnalysed){requestAnimationFrame(this.updateAnalysers);var e=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(e);for(var t=new Array(255),n=0,o=void 0,i=0;i<255;i+=1)o=Math.floor(e[i])-Math.floor(e[i])%5,0!==o&&(n=i),t[i]=o;this.config.onAnalysed({data:t,lineTo:n})}}},{key:"setOnAnalysed",value:function(e){this.config.onAnalysed=e}}]),e}();u.download=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"audio";r.default.forceDownload(e,t+".wav")},t.default=u},"78fe":function(e,t,n){(function(t){var n=!!(t===t.window&&t.URL&&t.Blob&&t.Worker);function o(e,o){var i,r=this;if(o=o||{},n)return i=e.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],new t.Worker(t.URL.createObjectURL(new t.Blob([i],{type:"text/javascript"})));function a(e){setTimeout((function(){r.onmessage({data:e})}),0)}this.self=o,this.self.postMessage=a,setTimeout(e.bind(o,o),0)}o.prototype.postMessage=function(e){var t=this;setTimeout((function(){t.self.onmessage({data:e})}),0)},e.exports=o}).call(this,n("c8ba"))},"9dd0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n("78fe"),r=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s={bufferLen:4096,numChannels:2,mimeType:"audio/wav"},u=function(){function e(t,n){var o=this;c(this,e),this.config=Object.assign({},s,n),this.recording=!1,this.callbacks={getBuffer:[],exportWAV:[]},this.context=t.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,this.config.bufferLen,this.config.numChannels,this.config.numChannels),this.node.onaudioprocess=function(e){if(o.recording){for(var t=[],n=0;n<o.config.numChannels;n++)t.push(e.inputBuffer.getChannelData(n));o.worker.postMessage({command:"record",buffer:t})}},t.connect(this.node),this.node.connect(this.context.destination);var i={};this.worker=new r.default((function(){var e=0,t=[],n=void 0,o=void 0;function i(e){n=e.sampleRate,o=e.numChannels,u()}function r(n){for(var i=0;i<o;i++)t[i].push(n[i]);e+=n[0].length}function a(n){for(var i=[],r=0;r<o;r++)i.push(l(t[r],e));var a=void 0;a=2===o?d(i[0],i[1]):i[0];var c=g(a),s=new Blob([c],{type:n});this.postMessage({command:"exportWAV",data:s})}function c(){for(var n=[],i=0;i<o;i++)n.push(l(t[i],e));this.postMessage({command:"getBuffer",data:n})}function s(){e=0,t=[],u()}function u(){for(var e=0;e<o;e++)t[e]=[]}function l(e,t){for(var n=new Float32Array(t),o=0,i=0;i<e.length;i++)n.set(e[i],o),o+=e[i].length;return n}function d(e,t){var n=e.length+t.length,o=new Float32Array(n),i=0,r=0;while(i<n)o[i++]=e[r],o[i++]=t[r],r++;return o}function f(e,t,n){for(var o=0;o<n.length;o++,t+=2){var i=Math.max(-1,Math.min(1,n[o]));e.setInt16(t,i<0?32768*i:32767*i,!0)}}function h(e,t,n){for(var o=0;o<n.length;o+=1)e.setUint8(t+o,n.charCodeAt(o))}function g(e){var t=new ArrayBuffer(44+2*e.length),i=new DataView(t);return h(i,0,"RIFF"),i.setUint32(4,36+2*e.length,!0),h(i,8,"WAVE"),h(i,12,"fmt "),i.setUint32(16,16,!0),i.setUint16(20,1,!0),i.setUint16(22,o,!0),i.setUint32(24,n,!0),i.setUint32(28,4*n,!0),i.setUint16(32,2*o,!0),i.setUint16(34,16,!0),h(i,36,"data"),i.setUint32(40,2*e.length,!0),f(i,44,e),i}this.onmessage=function(e){switch(e.data.command){case"init":i(e.data.config);break;case"record":r(e.data.buffer);break;case"exportWAV":a(e.data.type);break;case"getBuffer":c();break;case"clear":s();break}}}),i),this.worker.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:this.config.numChannels}}),this.worker.onmessage=function(e){var t=o.callbacks[e.data.command].pop();"function"===typeof t&&t(e.data.data)}}return o(e,[{key:"record",value:function(){this.recording=!0}},{key:"stop",value:function(){this.recording=!1}},{key:"clear",value:function(){this.worker.postMessage({command:"clear"})}},{key:"getBuffer",value:function(e){if(e=e||this.config.callback,!e)throw new Error("Callback not set");this.callbacks.getBuffer.push(e),this.worker.postMessage({command:"getBuffer"})}},{key:"exportWAV",value:function(e,t){if(t=t||this.config.mimeType,e=e||this.config.callback,!e)throw new Error("Callback not set");this.callbacks.exportWAV.push(e),this.worker.postMessage({command:"exportWAV",type:t})}}]),e}();u.forceDownload=function(e,t){var n=document.createElement("a");n.style="display: none",document.body.appendChild(n);var o=window.URL.createObjectURL(e);n.href=o,n.download=t,n.click(),window.URL.revokeObjectURL(o),document.body.removeChild(n)},t.default=u},b680:function(e,t,n){"use strict";var o=n("23e7"),i=n("5926"),r=n("408a"),a=n("1148"),c=n("d039"),s=1..toFixed,u=Math.floor,l=function(e,t,n){return 0===t?n:t%2===1?l(e,t-1,n*e):l(e*e,t/2,n)},d=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},f=function(e,t,n){var o=-1,i=n;while(++o<6)i+=t*e[o],e[o]=i%1e7,i=u(i/1e7)},h=function(e,t){var n=6,o=0;while(--n>=0)o+=e[n],e[n]=u(o/t),o=o%t*1e7},g=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var o=String(e[t]);n=""===n?o:n+a.call("0",7-o.length)+o}return n},p=s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!c((function(){s.call({})}));o({target:"Number",proto:!0,forced:p},{toFixed:function(e){var t,n,o,c,s=r(this),u=i(e),p=[0,0,0,0,0,0],v="",m="0";if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(v="-",s=-s),s>1e-21)if(t=d(s*l(2,69,1))-69,n=t<0?s*l(2,-t,1):s/l(2,t,1),n*=4503599627370496,t=52-t,t>0){f(p,0,n),o=u;while(o>=7)f(p,1e7,0),o-=7;f(p,l(10,o,1),0),o=t-1;while(o>=23)h(p,1<<23),o-=23;h(p,1<<o),f(p,1,1),h(p,2),m=g(p)}else f(p,0,n),f(p,1<<-t,0),m=g(p)+a.call("0",u);return u>0?(c=m.length,m=v+(c<=u?"0."+a.call("0",u-c)+m:m.slice(0,c-u)+"."+m.slice(c-u))):m=v+m,m}})},c782:function(e,t,n){e.exports=n("5c3d")}}]);
//# sourceMappingURL=chunk-028eadbc.39f31539.js.map