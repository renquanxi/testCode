{"version":3,"sources":["webpack:///./node_modules/core-js/internals/string-repeat.js","webpack:///./src/views/recorderDemo.vue?092e","webpack:///src/views/recorderDemo.vue","webpack:///./src/views/recorderDemo.vue?62f9","webpack:///./src/views/recorderDemo.vue","webpack:///./node_modules/core-js/internals/this-number-value.js","webpack:///./node_modules/recorder-js/lib/index.js","webpack:///./node_modules/inline-worker/index.js","webpack:///./node_modules/recorder-js/lib/microphone.js","webpack:///./node_modules/core-js/modules/es.number.to-fixed.js","webpack:///./node_modules/recorder-js/index.js"],"names":["toIntegerOrInfinity","toString","requireObjectCoercible","module","exports","count","str","this","result","n","Infinity","RangeError","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","Recordingtage","_v","_s","Recordingtime","on","startRecording","Recordingbtn","staticRenderFns","onAnalysed","console","log","name","data","created","methods","component","valueOf","value","call","Object","defineProperty","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_microphone","_microphone2","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","TypeError","defaultConfig","nFrequencyBars","Recorder","audioContext","config","arguments","undefined","assign","audioInput","realAudioInput","inputPoint","audioRecorder","rafID","analyserContext","recIndex","stream","updateAnalysers","bind","_this","Promise","resolve","createGain","createMediaStreamSource","connect","analyserNode","createAnalyser","fftSize","zeroGain","gain","destination","_this2","reject","clear","record","_this3","stop","getBuffer","buffer","exportWAV","blob","requestAnimationFrame","freqByteData","Uint8Array","frequencyBinCount","getByteFrequencyData","Array","lastNonZero","datum","idx","Math","floor","lineTo","handler","download","filename","forceDownload","InlineWorker","func","self","functionBody","WORKER_ENABLED","trim","match","global","Worker","URL","createObjectURL","Blob","type","postMessage","setTimeout","onmessage","_inlineWorker","_inlineWorker2","bufferLen","numChannels","mimeType","Microphone","source","recording","callbacks","context","node","createScriptProcessor","createJavaScriptNode","onaudioprocess","e","channel","push","inputBuffer","getChannelData","worker","command","recLength","recBuffers","sampleRate","init","initBuffers","buffers","mergeBuffers","interleaved","interleave","dataview","encodeWAV","audioBlob","Float32Array","offset","set","inputL","inputR","index","inputIndex","floatTo16BitPCM","output","input","s","max","min","setInt16","writeString","view","string","setUint8","charCodeAt","samples","ArrayBuffer","DataView","setUint32","setUint16","cb","pop","callback","Error","a","document","createElement","style","body","appendChild","url","window","href","click","revokeObjectURL","removeChild","$","thisNumberValue","repeat","fails","nativeToFixed","toFixed","pow","x","acc","x2","multiply","c","c2","divide","dataToString","t","String","FORCED","proto","forced","fractionDigits","z","j","k","number","fractDigits","sign","slice"],"mappings":"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","file":"js/chunk-028eadbc.88ed3ab2.js","sourcesContent":["'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toString = require('../internals/to-string');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.repeat` method implementation\n// https://tc39.es/ecma262/#sec-string.prototype.repeat\nmodule.exports = function repeat(count) {\n  var str = toString(requireObjectCoercible(this));\n  var result = '';\n  var n = toIntegerOrInfinity(count);\n  if (n < 0 || n == Infinity) throw RangeError('Wrong number of repetitions');\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;\n  return result;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('audio',{attrs:{\"id\":\"audio\"}}),_c('div',{staticClass:\"iconfont icon-sound\"}),_c('el-progress',{attrs:{\"show-text\":false,\"stroke-width\":5,\"percentage\":_vm.Recordingtage,\"color\":\"#2E70ED\"}}),_c('div',{staticClass:\"time-text\"},[_vm._v(_vm._s(_vm.Recordingtime))]),_c('el-button',{staticClass:\"record-btn\",on:{\"click\":_vm.startRecording}},[_vm._v(_vm._s(_vm.Recordingbtn))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <audio id=\"audio\"></audio>\r\n    <div class=\"iconfont icon-sound\"></div>\r\n    <el-progress :show-text=\"false\" :stroke-width=\"5\" :percentage=\"Recordingtage\"  color=\"#2E70ED\">\r\n    </el-progress>\r\n    <div class=\"time-text\">{{Recordingtime}}</div>\r\n    <el-button class=\"record-btn\" @click=\"startRecording\">{{Recordingbtn}}</el-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import '@/assets/js/recorder.mp3.min';\r\n// import '../js/luyin'\r\n\r\nimport Recorder from \"recorder-js\";    // 引入录音插件\r\nconst audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\nconst recorder = new Recorder(audioContext, {\r\n  // An array of 255 Numbers\r\n  // You can use this to visualize the audio stream\r\n  // If you use react, check out react-wave-stream\r\n  onAnalysed: data => {\r\n    console.log(\"recorder data\",data)\r\n  }\r\n});\r\nexport default {\r\n  name: 'recorderDemo',\r\n  data(){\r\n    return {\r\n        Recordingbtn: '开始录音',\r\n        Recordingtime: '00',\r\n        Recordingtage: '30',\r\n        Recordingnum: '',\r\n    }\r\n  },\r\n  created(){\r\n      \r\n  },\r\n  methods:{\r\n    startRecording(){\r\n        recorder.start().then(() => {\r\n            this.Recordingbtn = \"保存录音\";     //开始录音后按钮文字变化\r\n            this.Recordingnum = 0;\r\n            this.Recordingtime = \"0:00\";\r\n            this.Recordingtage = 0;\r\n            this.Recordingint = window.setInterval(function() {\r\n                this.Recordingnum++;\r\n                this.Recordingtime =\r\n                parseInt(this.Recordingnum / 60) +\r\n                \":\" +\r\n                (this.Recordingnum % 60 < 10\r\n                ? \"0\" + (this.Recordingnum % 60)\r\n                : this.Recordingnum % 60);\r\n                this.Recordingtage = parseFloat((self.Recordingnum / 18).toFixed(2));\r\n            }, 1000);  //计时换算\r\n        });  //开始录音流程\r\n\r\n        // window.clearInterval(this.Recordingint);    //录音完成清除定时\r\n\r\n        // recorder.stop().then(({ blob, buffer }) => {\r\n            \r\n        //     this.Recordingbtn = \"开始录音\";    //停止录音后按钮文字变化\r\n        //     blob = blob;\r\n        //     let formData = new FormData();\r\n        //     formData.append(\"type\", \"20\");\r\n        //     formData.append(\"file\", blob, \"file.wav\");\r\n        //     this.loading3 = true;\r\n        //     this.loading3t = \"音频上传中，请稍后\";\r\n\r\n        //     /* //此处调用接口（参数为formData）保存录音并返回一个audioUrl，用以本地播放 //  */\r\n        //     Recorder.download(blob, 'my-audio-file');  //将音频文件下载到本地\r\n\r\n        //     //听录音\r\n        //     this.loading2 = true;\r\n        //     let audiodom = document.getElementById(\"audio\");\r\n        //     // audiodom.src = window.SITE_CONFIG[\"baseUrl\"] + row.audioUrl;\r\n\r\n        //     audio.addEventListener(\r\n        //     \"loadeddata\",\r\n        //     function() {\r\n        //         audiodom.controls = \"controls\";\r\n        //         this.loading2 = false;\r\n        //         // audiodom.play();//开始播放\r\n        //     },\r\n        //     false\r\n        //     );  //听录音方法\r\n        //     console.log(buffer);\r\n        //     console.log(buffer);\r\n        //     console.log(buffer);\r\n        //     console.log(buffer);\r\n        // })\r\n    },\r\n  }\r\n  \r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./recorderDemo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./recorderDemo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./recorderDemo.vue?vue&type=template&id=6f4c0cae&scoped=true&\"\nimport script from \"./recorderDemo.vue?vue&type=script&lang=js&\"\nexport * from \"./recorderDemo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f4c0cae\",\n  null\n  \n)\n\nexport default component.exports","var valueOf = 1.0.valueOf;\n\n// `thisNumberValue` abstract operation\n// https://tc39.es/ecma262/#sec-thisnumbervalue\nmodule.exports = function (value) {\n  return valueOf.call(value);\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _microphone = require('./microphone');\n\nvar _microphone2 = _interopRequireDefault(_microphone);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar defaultConfig = {\n  nFrequencyBars: 255,\n  onAnalysed: null\n};\n\nvar Recorder = function () {\n  function Recorder(audioContext) {\n    var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Recorder);\n\n    this.config = Object.assign({}, defaultConfig, config);\n\n    this.audioContext = audioContext;\n    this.audioInput = null;\n    this.realAudioInput = null;\n    this.inputPoint = null;\n    this.audioRecorder = null;\n    this.rafID = null;\n    this.analyserContext = null;\n    this.recIndex = 0;\n    this.stream = null;\n\n    this.updateAnalysers = this.updateAnalysers.bind(this);\n  }\n\n  _createClass(Recorder, [{\n    key: 'init',\n    value: function init(stream) {\n      var _this = this;\n\n      return new Promise(function (resolve) {\n        _this.inputPoint = _this.audioContext.createGain();\n\n        _this.stream = stream;\n\n        _this.realAudioInput = _this.audioContext.createMediaStreamSource(stream);\n        _this.audioInput = _this.realAudioInput;\n        _this.audioInput.connect(_this.inputPoint);\n\n        _this.analyserNode = _this.audioContext.createAnalyser();\n        _this.analyserNode.fftSize = 2048;\n        _this.inputPoint.connect(_this.analyserNode);\n\n        _this.audioRecorder = new _microphone2.default(_this.inputPoint);\n\n        var zeroGain = _this.audioContext.createGain();\n        zeroGain.gain.value = 0.0;\n\n        _this.inputPoint.connect(zeroGain);\n        zeroGain.connect(_this.audioContext.destination);\n\n        _this.updateAnalysers();\n\n        resolve();\n      });\n    }\n  }, {\n    key: 'start',\n    value: function start() {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        if (!_this2.audioRecorder) {\n          reject('Not currently recording');\n          return;\n        }\n\n        _this2.audioRecorder.clear();\n        _this2.audioRecorder.record();\n\n        resolve(_this2.stream);\n      });\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var _this3 = this;\n\n      return new Promise(function (resolve) {\n        _this3.audioRecorder.stop();\n\n        _this3.audioRecorder.getBuffer(function (buffer) {\n          _this3.audioRecorder.exportWAV(function (blob) {\n            return resolve({ buffer: buffer, blob: blob });\n          });\n        });\n      });\n    }\n  }, {\n    key: 'updateAnalysers',\n    value: function updateAnalysers() {\n      if (this.config.onAnalysed) {\n        requestAnimationFrame(this.updateAnalysers);\n\n        var freqByteData = new Uint8Array(this.analyserNode.frequencyBinCount);\n\n        this.analyserNode.getByteFrequencyData(freqByteData);\n\n        var data = new Array(255);\n        var lastNonZero = 0;\n        var datum = void 0;\n\n        for (var idx = 0; idx < 255; idx += 1) {\n          datum = Math.floor(freqByteData[idx]) - Math.floor(freqByteData[idx]) % 5;\n\n          if (datum !== 0) {\n            lastNonZero = idx;\n          }\n\n          data[idx] = datum;\n        }\n\n        this.config.onAnalysed({ data: data, lineTo: lastNonZero });\n      }\n    }\n  }, {\n    key: 'setOnAnalysed',\n    value: function setOnAnalysed(handler) {\n      this.config.onAnalysed = handler;\n    }\n  }]);\n\n  return Recorder;\n}();\n\nRecorder.download = function download(blob) {\n  var filename = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'audio';\n\n  _microphone2.default.forceDownload(blob, filename + '.wav');\n};\n\nexports.default = Recorder;","var WORKER_ENABLED = !!(global === global.window && global.URL && global.Blob && global.Worker);\n\nfunction InlineWorker(func, self) {\n  var _this = this;\n  var functionBody;\n\n  self = self || {};\n\n  if (WORKER_ENABLED) {\n    functionBody = func.toString().trim().match(\n      /^function\\s*\\w*\\s*\\([\\w\\s,]*\\)\\s*{([\\w\\W]*?)}$/\n    )[1];\n\n    return new global.Worker(global.URL.createObjectURL(\n      new global.Blob([ functionBody ], { type: \"text/javascript\" })\n    ));\n  }\n\n  function postMessage(data) {\n    setTimeout(function() {\n      _this.onmessage({ data: data });\n    }, 0);\n  }\n\n  this.self = self;\n  this.self.postMessage = postMessage;\n\n  setTimeout(func.bind(self, self), 0);\n}\n\nInlineWorker.prototype.postMessage = function postMessage(data) {\n  var _this = this;\n\n  setTimeout(function() {\n    _this.self.onmessage({ data: data });\n  }, 0);\n};\n\nmodule.exports = InlineWorker;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* eslint-disable */\n/**\n * License (MIT)\n *\n * Copyright © 2013 Matt Diamond\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included\n * in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n *\n */\n\n\nvar _inlineWorker = require('inline-worker');\n\nvar _inlineWorker2 = _interopRequireDefault(_inlineWorker);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar defaultConfig = {\n  bufferLen: 4096,\n  numChannels: 2,\n  mimeType: 'audio/wav'\n};\n\nvar Microphone = function () {\n  function Microphone(source, config) {\n    var _this = this;\n\n    _classCallCheck(this, Microphone);\n\n    this.config = Object.assign({}, defaultConfig, config);\n\n    this.recording = false;\n\n    this.callbacks = {\n      getBuffer: [],\n      exportWAV: []\n    };\n\n    this.context = source.context;\n    this.node = (this.context.createScriptProcessor || this.context.createJavaScriptNode).call(this.context, this.config.bufferLen, this.config.numChannels, this.config.numChannels);\n\n    this.node.onaudioprocess = function (e) {\n      if (!_this.recording) return;\n\n      var buffer = [];\n      for (var channel = 0; channel < _this.config.numChannels; channel++) {\n        buffer.push(e.inputBuffer.getChannelData(channel));\n      }\n      _this.worker.postMessage({\n        command: 'record',\n        buffer: buffer\n      });\n    };\n\n    source.connect(this.node);\n    this.node.connect(this.context.destination); //this should not be necessary\n\n    var self = {};\n    this.worker = new _inlineWorker2.default(function () {\n      var recLength = 0,\n          recBuffers = [],\n          sampleRate = void 0,\n          numChannels = void 0;\n\n      this.onmessage = function (e) {\n        switch (e.data.command) {\n          case 'init':\n            init(e.data.config);\n            break;\n          case 'record':\n            record(e.data.buffer);\n            break;\n          case 'exportWAV':\n            exportWAV(e.data.type);\n            break;\n          case 'getBuffer':\n            getBuffer();\n            break;\n          case 'clear':\n            clear();\n            break;\n        }\n      };\n\n      function init(config) {\n        sampleRate = config.sampleRate;\n        numChannels = config.numChannels;\n        initBuffers();\n      }\n\n      function record(inputBuffer) {\n        for (var channel = 0; channel < numChannels; channel++) {\n          recBuffers[channel].push(inputBuffer[channel]);\n        }\n        recLength += inputBuffer[0].length;\n      }\n\n      function exportWAV(type) {\n        var buffers = [];\n        for (var channel = 0; channel < numChannels; channel++) {\n          buffers.push(mergeBuffers(recBuffers[channel], recLength));\n        }\n        var interleaved = void 0;\n        if (numChannels === 2) {\n          interleaved = interleave(buffers[0], buffers[1]);\n        } else {\n          interleaved = buffers[0];\n        }\n        var dataview = encodeWAV(interleaved);\n        var audioBlob = new Blob([dataview], { type: type });\n\n        this.postMessage({ command: 'exportWAV', data: audioBlob });\n      }\n\n      function getBuffer() {\n        var buffers = [];\n        for (var channel = 0; channel < numChannels; channel++) {\n          buffers.push(mergeBuffers(recBuffers[channel], recLength));\n        }\n        this.postMessage({ command: 'getBuffer', data: buffers });\n      }\n\n      function clear() {\n        recLength = 0;\n        recBuffers = [];\n        initBuffers();\n      }\n\n      function initBuffers() {\n        for (var channel = 0; channel < numChannels; channel++) {\n          recBuffers[channel] = [];\n        }\n      }\n\n      function mergeBuffers(recBuffers, recLength) {\n        var result = new Float32Array(recLength);\n        var offset = 0;\n        for (var i = 0; i < recBuffers.length; i++) {\n          result.set(recBuffers[i], offset);\n          offset += recBuffers[i].length;\n        }\n        return result;\n      }\n\n      function interleave(inputL, inputR) {\n        var length = inputL.length + inputR.length;\n        var result = new Float32Array(length);\n\n        var index = 0,\n            inputIndex = 0;\n\n        while (index < length) {\n          result[index++] = inputL[inputIndex];\n          result[index++] = inputR[inputIndex];\n          inputIndex++;\n        }\n        return result;\n      }\n\n      function floatTo16BitPCM(output, offset, input) {\n        for (var i = 0; i < input.length; i++, offset += 2) {\n          var s = Math.max(-1, Math.min(1, input[i]));\n          output.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7FFF, true);\n        }\n      }\n\n      function writeString(view, offset, string) {\n        for (var i = 0; i < string.length; i += 1) {\n          view.setUint8(offset + i, string.charCodeAt(i));\n        }\n      }\n\n      function encodeWAV(samples) {\n        var buffer = new ArrayBuffer(44 + samples.length * 2);\n        var view = new DataView(buffer);\n\n        /* RIFF identifier */\n        writeString(view, 0, 'RIFF');\n        /* RIFF chunk length */\n        view.setUint32(4, 36 + samples.length * 2, true);\n        /* RIFF type */\n        writeString(view, 8, 'WAVE');\n        /* format chunk identifier */\n        writeString(view, 12, 'fmt ');\n        /* format chunk length */\n        view.setUint32(16, 16, true);\n        /* sample format (raw) */\n        view.setUint16(20, 1, true);\n        /* channel count */\n        view.setUint16(22, numChannels, true);\n        /* sample rate */\n        view.setUint32(24, sampleRate, true);\n        /* byte rate (sample rate * block align) */\n        view.setUint32(28, sampleRate * 4, true);\n        /* block align (channel count * bytes per sample) */\n        view.setUint16(32, numChannels * 2, true);\n        /* bits per sample */\n        view.setUint16(34, 16, true);\n        /* data chunk identifier */\n        writeString(view, 36, 'data');\n        /* data chunk length */\n        view.setUint32(40, samples.length * 2, true);\n\n        floatTo16BitPCM(view, 44, samples);\n\n        return view;\n      }\n    }, self);\n\n    this.worker.postMessage({\n      command: 'init',\n      config: {\n        sampleRate: this.context.sampleRate,\n        numChannels: this.config.numChannels\n      }\n    });\n\n    this.worker.onmessage = function (e) {\n      var cb = _this.callbacks[e.data.command].pop();\n      if (typeof cb === 'function') {\n        cb(e.data.data);\n      }\n    };\n  }\n\n  _createClass(Microphone, [{\n    key: 'record',\n    value: function record() {\n      this.recording = true;\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.recording = false;\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.worker.postMessage({ command: 'clear' });\n    }\n  }, {\n    key: 'getBuffer',\n    value: function getBuffer(cb) {\n      cb = cb || this.config.callback;\n\n      if (!cb) throw new Error('Callback not set');\n\n      this.callbacks.getBuffer.push(cb);\n\n      this.worker.postMessage({ command: 'getBuffer' });\n    }\n  }, {\n    key: 'exportWAV',\n    value: function exportWAV(cb, mimeType) {\n      mimeType = mimeType || this.config.mimeType;\n      cb = cb || this.config.callback;\n\n      if (!cb) throw new Error('Callback not set');\n\n      this.callbacks.exportWAV.push(cb);\n\n      this.worker.postMessage({\n        command: 'exportWAV',\n        type: mimeType\n      });\n    }\n  }]);\n\n  return Microphone;\n}();\n\nMicrophone.forceDownload = function forceDownload(blob, filename) {\n  var a = document.createElement('a');\n\n  a.style = 'display: none';\n  document.body.appendChild(a);\n\n  var url = window.URL.createObjectURL(blob);\n\n  a.href = url;\n  a.download = filename;\n  a.click();\n\n  window.URL.revokeObjectURL(url);\n\n  document.body.removeChild(a);\n};\n\nexports.default = Microphone;","'use strict';\nvar $ = require('../internals/export');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar thisNumberValue = require('../internals/this-number-value');\nvar repeat = require('../internals/string-repeat');\nvar fails = require('../internals/fails');\n\nvar nativeToFixed = 1.0.toFixed;\nvar floor = Math.floor;\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar multiply = function (data, n, c) {\n  var index = -1;\n  var c2 = c;\n  while (++index < 6) {\n    c2 += n * data[index];\n    data[index] = c2 % 1e7;\n    c2 = floor(c2 / 1e7);\n  }\n};\n\nvar divide = function (data, n) {\n  var index = 6;\n  var c = 0;\n  while (--index >= 0) {\n    c += data[index];\n    data[index] = floor(c / n);\n    c = (c % n) * 1e7;\n  }\n};\n\nvar dataToString = function (data) {\n  var index = 6;\n  var s = '';\n  while (--index >= 0) {\n    if (s !== '' || index === 0 || data[index] !== 0) {\n      var t = String(data[index]);\n      s = s === '' ? t : s + repeat.call('0', 7 - t.length) + t;\n    }\n  } return s;\n};\n\nvar FORCED = nativeToFixed && (\n  0.00008.toFixed(3) !== '0.000' ||\n  0.9.toFixed(0) !== '1' ||\n  1.255.toFixed(2) !== '1.25' ||\n  1000000000000000128.0.toFixed(0) !== '1000000000000000128'\n) || !fails(function () {\n  // V8 ~ Android 4.3-\n  nativeToFixed.call({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.es/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toIntegerOrInfinity(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    if (fractDigits < 0 || fractDigits > 20) throw RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (number != number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(data, 0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(data, 1e7, 0);\n          j -= 7;\n        }\n        multiply(data, pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(data, 1 << 23);\n          j -= 23;\n        }\n        divide(data, 1 << j);\n        multiply(data, 1, 1);\n        divide(data, 2);\n        result = dataToString(data);\n      } else {\n        multiply(data, 0, z);\n        multiply(data, 1 << -e, 0);\n        result = dataToString(data) + repeat.call('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat.call('0', fractDigits - k) + result\n        : result.slice(0, k - fractDigits) + '.' + result.slice(k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n","module.exports = require('./lib/index.js');\n"],"sourceRoot":""}